<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <title>Dashboard - Study Group</title>
    <style>
      :root {
        --primary-color: #4caf50;
        --primary-hover: #388e3c;
        --primary-light: #e8f5e8;
        --secondary-color: #2196f3;
        --secondary-light: #e3f2fd;
        --warning-color: #ff9800;
        --danger-color: #f44336;
        --dark-text: #333;
        --medium-text: #666;
        --light-text: #888;
        --border-light: #e0e0e0;
        --background-light: #f8f9fa;
        --shadow-light: rgba(0, 0, 0, 0.1);
        --shadow-medium: rgba(0, 0, 0, 0.15);
        --border-radius: 12px;
        --transition: all 0.3s ease;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", "Arial", sans-serif;
        background: var(--background-light);
        overflow-x: hidden;
        transition: var(--transition);
        color: var(--dark-text);
      }

      /* Enhanced Dark mode styles */
      body.dark-mode {
        --dark-text: #e0e0e0;
        --medium-text: #bbb;
        --light-text: #999;
        --background-light: #1a1a1a;
        --border-light: #333;
        background: #1a1a1a;
        color: var(--dark-text);
      }

      body.dark-mode .sidebar {
        background: linear-gradient(135deg, #2e5d31 0%, #4a7c4f 100%);
      }

      body.dark-mode .top-nav,
      body.dark-mode .quick-actions,
      body.dark-mode .study-rooms,
      body.dark-mode .todo-section,
      body.dark-mode .stat-card {
        background: #2a2a2a;
        color: var(--dark-text);
      }

      body.dark-mode .room-card,
      body.dark-mode .todo-item {
        background: #333;
        color: var(--dark-text);
      }

      /* Fix search input in dark mode */
      body.dark-mode .search-input {
        background: #333;
        border-color: #444;
        color: var(--dark-text);
      }

      body.dark-mode .search-input::placeholder {
        color: var(--light-text);
      }

      body.dark-mode .search-input:focus {
        background: #3a3a3a;
        border-color: var(--primary-color);
      }

      /* Fix form inputs in dark mode */
      body.dark-mode .form-input,
      body.dark-mode .form-textarea {
        background: #333;
        border-color: #444;
        color: var(--dark-text);
      }

      body.dark-mode .form-input::placeholder,
      body.dark-mode .form-textarea::placeholder {
        color: var(--light-text);
      }

      body.dark-mode .form-input:focus,
      body.dark-mode .form-textarea:focus {
        background: #3a3a3a;
        border-color: var(--primary-color);
      }

      /* Fix modal in dark mode */
      body.dark-mode .todo-modal-content {
        background: #2a2a2a;
        color: var(--dark-text);
      }

      body.dark-mode .modal-title {
        color: var(--dark-text);
      }

      body.dark-mode .form-label {
        color: var(--dark-text);
      }

      /* Fix text colors in dark mode */
      body.dark-mode .section-title {
        color: var(--dark-text);
      }

      body.dark-mode .page-title {
        color: var(--dark-text);
      }

      body.dark-mode .room-title {
        color: var(--dark-text);
      }

      body.dark-mode .room-description {
        color: var(--medium-text);
      }

      body.dark-mode .todo-text {
        color: var(--dark-text);
      }

      body.dark-mode .participant-count {
        color: var(--medium-text);
      }

      body.dark-mode .stat-label {
        color: var(--medium-text);
      }

      body.dark-mode .stat-change {
        color: var(--primary-color);
      }

      /* Sidebar Styles */
      .sidebar {
        position: fixed;
        left: -280px;
        top: 0;
        width: 280px;
        height: 100vh;
        background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
        transition: left 0.3s ease;
        z-index: 1000;
        box-shadow: 2px 0 20px var(--shadow-light);
      }

      .sidebar.open {
        left: 0;
      }

      .sidebar-header {
        padding: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .sidebar-brand {
        color: white;
        font-size: 18px;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .sidebar-menu {
        padding: 20px 0;
      }

      .sidebar-item {
        display: block;
        color: white;
        text-decoration: none;
        padding: 15px 20px;
        transition: var(--transition);
        border-left: 3px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .sidebar-item::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 0;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        transition: width 0.3s ease;
      }

      .sidebar-item:hover::before,
      .sidebar-item.active::before {
        width: 100%;
      }

      .sidebar-item:hover,
      .sidebar-item.active {
        background: rgba(255, 255, 255, 0.1);
        border-left-color: white;
        color: white;
        transform: translateX(5px);
      }

      .sidebar-item i {
        width: 20px;
        margin-right: 10px;
        position: relative;
        z-index: 2;
      }

      .sidebar-item span {
        position: relative;
        z-index: 2;
      }

      .sidebar-footer {
        position: absolute;
        bottom: 20px;
        width: 100%;
        padding: 0 20px;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 10px;
        cursor: pointer;
        transition: var(--transition);
      }

      .user-info:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      /* Main Content */
      .main-content {
        margin-left: 0;
        transition: margin-left 0.3s ease;
        min-height: 100vh;
      }

      .main-content.shifted {
        margin-left: 280px;
      }

      /* Top Navigation - WITHOUT CLOCK */
      .top-nav {
        background: white;
        padding: 15px 30px;
        box-shadow: 0 2px 20px var(--shadow-light);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(10px);
      }

      .nav-left {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .menu-toggle {
        background: none;
        border: none;
        font-size: 20px;
        color: var(--medium-text);
        cursor: pointer;
        padding: 8px;
        border-radius: 8px;
        transition: var(--transition);
      }

      .menu-toggle:hover {
        background: var(--background-light);
        transform: scale(1.1);
      }

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--dark-text);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nav-right {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .search-bar {
        position: relative;
      }

      .search-input {
        width: 300px;
        padding: 10px 40px 10px 15px;
        border: 1px solid var(--border-light);
        border-radius: 25px;
        font-size: 14px;
        transition: var(--transition);
        background: var(--background-light);
        color: var(--dark-text);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        width: 350px;
      }

      .search-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--light-text);
      }

      .theme-toggle {
        background: none;
        border: none;
        font-size: 18px;
        color: var(--medium-text);
        cursor: pointer;
        padding: 8px;
        border-radius: 8px;
        transition: var(--transition);
      }

      .theme-toggle:hover {
        background: var(--background-light);
        transform: scale(1.1);
      }

      /* Dashboard Content */
      .dashboard-content {
        padding: 30px;
        animation: fadeIn 0.6s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .content-row {
        display: flex;
        gap: 30px;
        margin-bottom: 30px;
      }

      .main-section {
        flex: 2;
      }

      .side-section {
        flex: 1;
        max-width: 400px;
      }

      /* Quick Study Actions */
      .quick-actions {
        background: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: 0 5px 20px var(--shadow-light);
        margin-bottom: 30px;
        transition: var(--transition);
      }

      .quick-actions:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px var(--shadow-medium);
      }

      .section-title {
        font-size: 20px;
        font-weight: 600;
        color: var(--dark-text);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .action-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .action-card {
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          #66bb6a 100%
        );
        color: white;
        padding: 20px;
        border-radius: var(--border-radius);
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
        border: none;
        text-decoration: none;
        position: relative;
        overflow: hidden;
      }

      .action-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .action-card:hover::before {
        left: 100%;
      }

      .action-card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 10px 30px rgba(76, 175, 80, 0.4);
        color: white;
      }

      .action-card i {
        font-size: 32px;
        margin-bottom: 12px;
        display: block;
        animation: bounce 2s infinite;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-5px);
        }
        60% {
          transform: translateY(-3px);
        }
      }

      .action-card h4 {
        font-size: 16px;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .action-card p {
        font-size: 13px;
        opacity: 0.9;
        margin: 0;
      }

      /* Study Rooms Section */
      .study-rooms {
        background: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: 0 5px 20px var(--shadow-light);
        transition: var(--transition);
      }

      .study-rooms:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px var(--shadow-medium);
      }

      .room-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .room-card {
        background: var(--background-light);
        border-radius: var(--border-radius);
        padding: 20px;
        transition: var(--transition);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .room-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), #66bb6a);
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .room-card:hover::before {
        transform: scaleX(1);
      }

      .room-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px var(--shadow-medium);
        border-color: var(--primary-color);
      }

      .room-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
      }

      .room-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--dark-text);
        margin-bottom: 5px;
      }

      .room-description {
        font-size: 13px;
        color: var(--medium-text);
        line-height: 1.5;
      }

      .room-tags {
        display: flex;
        gap: 8px;
        margin: 15px 0;
        flex-wrap: wrap;
      }

      .room-tag {
        background: var(--primary-light);
        color: var(--primary-hover);
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 11px;
        font-weight: 500;
        transition: var(--transition);
      }

      .room-tag:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-1px);
      }

      .room-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
      }

      .participant-count {
        font-size: 13px;
        color: var(--medium-text);
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .join-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
      }

      .join-btn:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      /* To-Do Section */
      .todo-section {
        background: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: 0 5px 20px var(--shadow-light);
        margin-bottom: 20px;
        transition: var(--transition);
      }

      .todo-section:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px var(--shadow-medium);
      }

      .todo-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .add-todo-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
      }

      .add-todo-btn:hover {
        background: var(--primary-hover);
        transform: translateY(-1px);
      }

      .todo-item {
        background: var(--background-light);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        border-left: 4px solid var(--primary-color);
        transition: var(--transition);
        animation: slideInLeft 0.3s ease-out;
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-20px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .todo-item:hover {
        transform: translateX(5px);
        box-shadow: 0 3px 15px var(--shadow-light);
      }

      .todo-item.completed {
        opacity: 0.6;
        border-left-color: var(--light-text);
      }

      .todo-content {
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }

      .todo-checkbox {
        margin-top: 3px;
        transform: scale(1.2);
      }

      .todo-text {
        flex: 1;
        font-size: 14px;
        line-height: 1.4;
        color: var(--dark-text);
      }

      .todo-text.completed {
        text-decoration: line-through;
        color: var(--medium-text);
      }

      .todo-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
        font-size: 12px;
        color: var(--medium-text);
      }

      .todo-reminder {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .todo-actions {
        display: flex;
        gap: 5px;
      }

      .todo-action-btn {
        background: none;
        border: none;
        color: var(--medium-text);
        font-size: 12px;
        cursor: pointer;
        padding: 4px 6px;
        border-radius: 4px;
        transition: var(--transition);
      }

      .todo-action-btn:hover {
        background: var(--border-light);
        color: var(--dark-text);
        transform: scale(1.1);
      }

      /* Stats Cards */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
      }

      .stat-card {
        background: white;
        padding: 20px;
        border-radius: var(--border-radius);
        text-align: center;
        box-shadow: 0 5px 15px var(--shadow-light);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
      }

      .stat-card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 10px 25px var(--shadow-medium);
      }

      .stat-number {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
        animation: countUp 1s ease-out;
      }

      @keyframes countUp {
        from {
          transform: scale(0.5);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .stat-label {
        font-size: 12px;
        color: var(--medium-text);
        font-weight: 500;
      }

      .stat-change {
        font-size: 10px;
        color: var(--primary-color);
        margin-top: 3px;
        font-weight: 500;
      }

      /* Modal Styles */
      .todo-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        animation: fadeIn 0.3s ease-out;
      }

      .todo-modal-content {
        background: white;
        margin: 5% auto;
        padding: 30px;
        border-radius: var(--border-radius);
        width: 90%;
        max-width: 500px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        animation: slideInDown 0.3s ease-out;
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark-text);
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--medium-text);
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: var(--transition);
      }

      .close-modal:hover {
        background: var(--border-light);
        transform: scale(1.1);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: var(--dark-text);
      }

      .form-input,
      .form-textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--border-light);
        border-radius: 8px;
        font-size: 14px;
        transition: var(--transition);
        background: var(--background-light);
        color: var(--dark-text);
      }

      .form-textarea {
        resize: vertical;
        min-height: 80px;
      }

      .form-input:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
      }

      .modal-actions {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
      }

      .modal-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
      }

      .modal-btn-cancel {
        background: var(--background-light);
        color: var(--medium-text);
      }

      .modal-btn-save {
        background: var(--primary-color);
        color: white;
      }

      .modal-btn:hover {
        transform: translateY(-1px);
      }

      .modal-btn-cancel:hover {
        background: var(--border-light);
      }

      .modal-btn-save:hover {
        background: var(--primary-hover);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .main-content.shifted {
          margin-left: 0;
        }

        .content-row {
          flex-direction: column;
        }

        .search-input {
          width: 200px;
        }

        .search-input:focus {
          width: 220px;
        }

        .action-grid {
          grid-template-columns: 1fr;
        }

        .room-grid {
          grid-template-columns: 1fr;
        }

        .dashboard-content {
          padding: 20px;
        }

        .nav-right {
          gap: 10px;
        }
      }

      /* Loading animations */
      .loading {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }

      /* Accessibility improvements */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Focus styles for better accessibility */
      *:focus-visible {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <i class="bi bi-book"></i>
          StudyGroup
        </div>
      </div>

      <nav class="sidebar-menu" role="navigation">
        <a
          href="dashboard.html"
          class="sidebar-item active"
          aria-current="page"
        >
          <i class="bi bi-house"></i>
          <span>Dashboard</span>
        </a>
        <a href="profile.html" class="sidebar-item">
          <i class="bi bi-person"></i>
          <span>Profile</span>
        </a>
        <a href="study-rooms.html" class="sidebar-item">
          <i class="bi bi-door-open"></i>
          <span>Study Rooms</span>
        </a>
        <a href="resources.html" class="sidebar-item">
          <i class="bi bi-folder"></i>
          <span>Resources</span>
        </a>
        <a href="discussion.html" class="sidebar-item">
          <i class="bi bi-chat-dots"></i>
          <span>Discussion Forum</span>
        </a>
        <a href="report.html" class="sidebar-item">
          <i class="bi bi-flag"></i>
          <span>Report</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div
          class="user-info"
          onclick="goToProfile()"
          role="button"
          tabindex="0"
          aria-label="Go to profile - DanePascual"
        >
          <div class="user-avatar">DP</div>
          <div>
            <div style="font-weight: bold; font-size: 14px">DanePascual</div>
            <div style="font-size: 12px; opacity: 0.8">BSIT</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
      <!-- Top Navigation - WITHOUT CLOCK -->
      <div class="top-nav">
        <div class="nav-left">
          <button
            class="menu-toggle"
            id="menuToggle"
            aria-label="Toggle sidebar"
          >
            <i class="bi bi-list"></i>
          </button>
          <h1 class="page-title">Dashboard</h1>
        </div>

        <div class="nav-right">
          <div class="search-bar">
            <input
              type="text"
              class="search-input"
              placeholder="Search rooms, users..."
              aria-label="Search"
            />
            <i class="bi bi-search search-icon"></i>
          </div>
          <button
            class="theme-toggle"
            id="themeToggle"
            aria-label="Toggle theme"
          >
            <i class="bi bi-moon"></i>
          </button>
        </div>
      </div>

      <!-- Dashboard Content -->
      <div class="dashboard-content">
        <div class="content-row">
          <!-- Main Section -->
          <div class="main-section">
            <!-- Quick Study Actions -->
            <div class="quick-actions">
              <h2 class="section-title">
                <i class="bi bi-lightning"></i>
                Quick Study Actions
              </h2>
              <div class="action-grid">
                <button
                  class="action-card"
                  onclick="startFocusSession()"
                  aria-label="Start focus session"
                >
                  <i class="bi bi-stopwatch"></i>
                  <h4>Start Focus Session</h4>
                  <p>25-minute focused study</p>
                </button>
                <button
                  class="action-card"
                  onclick="joinPopularRoom()"
                  aria-label="Join popular room"
                >
                  <i class="bi bi-people"></i>
                  <h4>Join Popular Room</h4>
                  <p>Most active study room</p>
                </button>
                <button
                  class="action-card"
                  onclick="createStudyGroup()"
                  aria-label="Create study group"
                >
                  <i class="bi bi-plus-circle"></i>
                  <h4>Create Study Group</h4>
                  <p>Start your own session</p>
                </button>
                <button
                  class="action-card"
                  onclick="browseResources()"
                  aria-label="Browse resources"
                >
                  <i class="bi bi-folder2-open"></i>
                  <h4>Browse Resources</h4>
                  <p>Study materials & notes</p>
                </button>
              </div>
            </div>

            <!-- Active Study Rooms -->
            <div class="study-rooms">
              <h2 class="section-title">
                <i class="bi bi-door-open"></i>
                Active Study Rooms
              </h2>
              <div class="room-grid">
                <div class="room-card" data-room-id="cs">
                  <div class="room-header">
                    <div>
                      <h3 class="room-title">CS Study Room</h3>
                      <p class="room-description">
                        Solving problems related to algorithms and data
                        structures.
                      </p>
                    </div>
                  </div>
                  <div class="room-tags">
                    <span class="room-tag">Programming</span>
                    <span class="room-tag">Algorithms</span>
                  </div>
                  <div class="room-footer">
                    <span class="participant-count">
                      <i class="bi bi-people"></i>
                      <span id="cs-count">3</span> participants
                    </span>
                    <button class="join-btn" onclick="joinRoom('cs')">
                      Join Now
                    </button>
                  </div>
                </div>

                <div class="room-card" data-room-id="web-dev">
                  <div class="room-header">
                    <div>
                      <h3 class="room-title">Web Development Study</h3>
                      <p class="room-description">
                        Building modern web applications with React and Node.js.
                      </p>
                    </div>
                  </div>
                  <div class="room-tags">
                    <span class="room-tag">JavaScript</span>
                    <span class="room-tag">React</span>
                    <span class="room-tag">Node.js</span>
                  </div>
                  <div class="room-footer">
                    <span class="participant-count">
                      <i class="bi bi-people"></i>
                      <span id="web-dev-count">7</span> participants
                    </span>
                    <button class="join-btn" onclick="joinRoom('web-dev')">
                      Join Now
                    </button>
                  </div>
                </div>

                <div class="room-card" data-room-id="database">
                  <div class="room-header">
                    <div>
                      <h3 class="room-title">Database Design</h3>
                      <p class="room-description">
                        Learning SQL, database optimization and design patterns.
                      </p>
                    </div>
                  </div>
                  <div class="room-tags">
                    <span class="room-tag">SQL</span>
                    <span class="room-tag">PostgreSQL</span>
                  </div>
                  <div class="room-footer">
                    <span class="participant-count">
                      <i class="bi bi-people"></i>
                      <span id="database-count">5</span> participants
                    </span>
                    <button class="join-btn" onclick="joinRoom('database')">
                      Join Now
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Side Section -->
          <div class="side-section">
            <!-- To-Do Lists -->
            <div class="todo-section">
              <div class="todo-header">
                <h3 class="section-title">
                  <i class="bi bi-check2-square"></i>
                  Study Notes & Tasks
                </h3>
                <button class="add-todo-btn" onclick="openTodoModal()">
                  <i class="bi bi-plus"></i> Add Task
                </button>
              </div>

              <div id="todoList">
                <!-- Todo items will be rendered here -->
              </div>
            </div>

            <!-- Study Stats -->
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-number" data-target="15">0</div>
                <div class="stat-label">Active Rooms</div>
                <div class="stat-change">+3 today</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" data-target="8">0</div>
                <div class="stat-label">Study Groups</div>
                <div class="stat-change">3 subjects</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" data-target="42">0</div>
                <div class="stat-label">Resources</div>
                <div class="stat-change">+12 this week</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" data-target="28">0</div>
                <div class="stat-label">Study Hours</div>
                <div class="stat-change">This week</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Todo Modal -->
    <div
      id="todoModal"
      class="todo-modal"
      role="dialog"
      aria-labelledby="modalTitle"
      aria-hidden="true"
    >
      <div class="todo-modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="modalTitle">Add Study Task & Reminder</h3>
          <button
            class="close-modal"
            onclick="closeTodoModal()"
            aria-label="Close modal"
          >
            Ã—
          </button>
        </div>

        <form id="todoForm">
          <div class="form-group">
            <label class="form-label" for="todoText">Task/Note</label>
            <textarea
              class="form-textarea"
              id="todoText"
              placeholder="Enter your study task or note..."
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label class="form-label" for="todoReminder"
              >Reminder Date & Time (Optional)</label
            >
            <input type="datetime-local" class="form-input" id="todoReminder" />
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn modal-btn-cancel"
              onclick="closeTodoModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn modal-btn-save">
              Save Task
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
      // Current Session Info - 2025-07-05 21:04:57 Philippines Time (UTC+8)
const CURRENT_SESSION = {
  utcTime: "2025-07-05 13:04:57", // UTC time
  philippinesTime: "2025-07-05 21:04:57", // Philippines time (UTC+8)
  datetime: "2025-07-05 21:04:57", // Local Philippines time for compatibility
  user: "DanePascual",
  userAvatar: "DP",
  userProgram: "BSIT",
  timezone: "Asia/Manila"
};

// Theme management
const themeToggle = document.getElementById("themeToggle");
const body = document.body;

// Load saved theme
const savedTheme = localStorage.getItem("theme") || "light";
if (savedTheme === "dark") {
  body.classList.add("dark-mode");
  themeToggle.innerHTML = '<i class="bi bi-sun"></i>';
}

themeToggle.addEventListener("click", () => {
  body.classList.toggle("dark-mode");
  const isDark = body.classList.contains("dark-mode");
  themeToggle.innerHTML = isDark
    ? '<i class="bi bi-sun"></i>'
    : '<i class="bi bi-moon"></i>';
  localStorage.setItem("theme", isDark ? "dark" : "light");

  console.log(
    `ðŸŽ¨ Theme switched to ${isDark ? "dark" : "light"} mode by ${
      CURRENT_SESSION.user
    } at ${CURRENT_SESSION.philippinesTime} Philippines Time (UTC+8)`
  );
});

      // Animated counter for stats
      function animateCounter(element) {
        const target = parseInt(element.getAttribute("data-target"));
        let current = 0;
        const increment = target / 30; // 30 frames for smooth animation
        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            element.textContent = target;
            clearInterval(timer);
          } else {
            element.textContent = Math.floor(current);
          }
        }, 50);
      }

      // Intersection Observer for stats animation
      const observerOptions = {
        threshold: 0.5,
        rootMargin: "0px 0px -100px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const statNumbers = entry.target.querySelectorAll(
              ".stat-number[data-target]"
            );
            statNumbers.forEach(animateCounter);
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      // Observe stats grid
      document.addEventListener("DOMContentLoaded", () => {
        const statsGrid = document.querySelector(".stats-grid");
        if (statsGrid) observer.observe(statsGrid);
      });

      // Enhanced sidebar functionality
      const menuToggle = document.getElementById("menuToggle");
      const sidebar = document.getElementById("sidebar");
      const mainContent = document.getElementById("mainContent");

      menuToggle.addEventListener("click", function () {
        sidebar.classList.toggle("open");
        mainContent.classList.toggle("shifted");

        // Save sidebar state
        localStorage.setItem("sidebarOpen", sidebar.classList.contains("open"));
      });

      // Load saved sidebar state
      document.addEventListener("DOMContentLoaded", () => {
        const sidebarOpen = localStorage.getItem("sidebarOpen") === "true";
        if (sidebarOpen && window.innerWidth > 768) {
          sidebar.classList.add("open");
          mainContent.classList.add("shifted");
        }
      });

      // Close sidebar when clicking outside on mobile
      document.addEventListener("click", function (event) {
        if (window.innerWidth <= 768) {
          if (
            !sidebar.contains(event.target) &&
            !menuToggle.contains(event.target) &&
            sidebar.classList.contains("open")
          ) {
            sidebar.classList.remove("open");
            mainContent.classList.remove("shifted");
          }
        }
      });

      // Enhanced search functionality with suggestions
      const searchInput = document.querySelector(".search-input");
      let searchTimeout;

      searchInput.addEventListener("input", function (e) {
        clearTimeout(searchTimeout);
        const query = e.target.value.trim();

        if (query.length > 1) {
          searchTimeout = setTimeout(() => {
            performSearch(query);
          }, 300);
        }
      });

      function performSearch(query) {
        // Mock search functionality - replace with actual API call
        const mockResults = [
          {
            type: "room",
            name: "CS Study Room",
            description: "Algorithms and data structures",
          },
          { type: "user", name: "John Doe", description: "BSIT Student" },
          {
            type: "resource",
            name: "React Tutorial",
            description: "Frontend development guide",
          },
        ];

        const filtered = mockResults.filter(
          (item) =>
            item.name.toLowerCase().includes(query.toLowerCase()) ||
            item.description.toLowerCase().includes(query.toLowerCase())
        );

        console.log("Search results for:", query, filtered);
        // TODO: Display search suggestions dropdown
      }

      // Enhanced Quick Study Actions
      function startFocusSession() {
        const actionCard = event.target.closest(".action-card");
        actionCard.classList.add("loading");

        setTimeout(() => {
          actionCard.classList.remove("loading");
          showNotification(
            "ðŸŽ¯ Focus session started! 25 minutes of productive study time.",
            "success"
          );
        }, 1000);
      }

      function joinPopularRoom() {
        // Find room with highest participant count
        const participantCounts = {
          cs: parseInt(document.getElementById("cs-count").textContent),
          "web-dev": parseInt(
            document.getElementById("web-dev-count").textContent
          ),
          database: parseInt(
            document.getElementById("database-count").textContent
          ),
        };

        const popularRoom = Object.keys(participantCounts).reduce((a, b) =>
          participantCounts[a] > participantCounts[b] ? a : b
        );

        joinRoom(popularRoom);
      }

      function createStudyGroup() {
        showNotification("ðŸš€ Redirecting to create study group...", "info");
        setTimeout(() => {
          window.location.href = "study-rooms.html?action=create";
        }, 1000);
      }

      function browseResources() {
        showNotification("ðŸ“š Opening study resources...", "info");
        setTimeout(() => {
          window.location.href = "resources.html";
        }, 1000);
      }

      function goToProfile() {
        showNotification(
          `ðŸ‘¤ Opening ${CURRENT_SESSION.user}'s profile...`,
          "info"
        );
        setTimeout(() => {
          window.location.href = "profile.html";
        }, 1000);
      }

      function joinRoom(roomType) {
        const rooms = {
          cs: "CS Study Room",
          "web-dev": "Web Development Study",
          database: "Database Design",
        };

        const roomName = rooms[roomType] || "Unknown Room";
        showNotification(`ðŸšª Joining ${roomName}...`, "info");

        // Simulate joining
        setTimeout(() => {
          window.location.href = `study-room-inside.html?room=${roomType}`;
        }, 1500);
      }

      // Enhanced notification system
      function showNotification(message, type = "info") {
        // Remove existing notifications
        const existingNotifications =
          document.querySelectorAll(".notification");
        existingNotifications.forEach((n) => n.remove());

        const notification = document.createElement("div");
        notification.className = `notification notification-${type}`;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: ${
            type === "success"
              ? "#4caf50"
              : type === "error"
              ? "#f44336"
              : "#2196f3"
          };
          color: white;
          padding: 15px 20px;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          z-index: 10000;
          animation: slideInRight 0.3s ease-out;
          max-width: 300px;
          font-size: 14px;
        `;

        // Add animation keyframes if not exists
        if (!document.querySelector("#notification-styles")) {
          const style = document.createElement("style");
          style.id = "notification-styles";
          style.textContent = `
            @keyframes slideInRight {
              from { transform: translateX(100%); opacity: 0; }
              to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
              from { transform: translateX(0); opacity: 1; }
              to { transform: translateX(100%); opacity: 0; }
            }
          `;
          document.head.appendChild(style);
        }

        notification.textContent = message;
        document.body.appendChild(notification);

        // Auto remove after 4 seconds
        setTimeout(() => {
          notification.style.animation = "slideOutRight 0.3s ease-in";
          setTimeout(() => {
            if (notification.parentNode) {
              notification.remove();
            }
          }, 300);
        }, 4000);
      }

      // Enhanced Todo Management
      let editingTodoIndex = -1;
      let todos = JSON.parse(localStorage.getItem("studyTasks") || "[]");

      // Initialize with some sample todos if empty
      if (todos.length === 0) {
        todos = [
          {
            id: Date.now() - 1000,
            text: "Complete React tutorial from CS Study Room",
            completed: false,
            reminder: null,
            created: new Date().toISOString(),
            priority: "high",
          },
          {
            id: Date.now() - 2000,
            text: "Review database normalization concepts",
            completed: true,
            reminder: null,
            created: new Date().toISOString(),
            priority: "medium",
          },
          {
            id: Date.now() - 3000,
            text: "Prepare for algorithms quiz on Friday",
            completed: false,
            reminder: "2025-07-08T14:00",
            created: new Date().toISOString(),
            priority: "high",
          },
        ];
        localStorage.setItem("studyTasks", JSON.stringify(todos));
      }

      function openTodoModal() {
        document.getElementById("todoModal").style.display = "block";
        document.getElementById("todoText").value = "";
        document.getElementById("todoReminder").value = "";
        editingTodoIndex = -1;
        document.querySelector(".modal-title").textContent =
          "Add Study Task & Reminder";
        document.getElementById("todoText").focus();
      }

      function closeTodoModal() {
        document.getElementById("todoModal").style.display = "none";
      }

      function saveTodo() {
        const text = document.getElementById("todoText").value.trim();
        const reminder = document.getElementById("todoReminder").value;

        if (!text) {
          showNotification("Please enter a task description!", "error");
          return;
        }

        const todo = {
          id: Date.now(),
          text: text,
          completed: false,
          reminder: reminder,
          created: new Date().toISOString(),
          priority: "medium",
        };

        if (editingTodoIndex >= 0) {
          todos[editingTodoIndex] = {
            ...todos[editingTodoIndex],
            text: text,
            reminder: reminder,
          };
          showNotification("Task updated successfully!", "success");
        } else {
          todos.unshift(todo);
          showNotification("New task added!", "success");
        }

        localStorage.setItem("studyTasks", JSON.stringify(todos));
        renderTodos();
        closeTodoModal();

        if (reminder) {
          scheduleNotification(todo);
        }
      }

      function renderTodos() {
        const todoList = document.getElementById("todoList");

        if (todos.length === 0) {
          todoList.innerHTML = `
            <div style="text-align: center; padding: 30px; color: var(--medium-text);">
              <i class="bi bi-journal-text" style="font-size: 48px; margin-bottom: 15px; display: block; opacity: 0.5;"></i>
              <p>No study tasks yet.</p>
              <p style="font-size: 12px;">Click "Add Task" to create your first reminder!</p>
            </div>
          `;
          return;
        }

        const sortedTodos = [...todos].sort((a, b) => {
          if (a.completed !== b.completed) return a.completed - b.completed;
          const priorityOrder = { high: 0, medium: 1, low: 2 };
          if (a.priority !== b.priority)
            return priorityOrder[a.priority] - priorityOrder[b.priority];
          return new Date(b.created) - new Date(a.created);
        });

        todoList.innerHTML = sortedTodos
          .map((todo, index) => {
            const originalIndex = todos.findIndex((t) => t.id === todo.id);
            const priorityColor =
              todo.priority === "high"
                ? "#f44336"
                : todo.priority === "medium"
                ? "#ff9800"
                : "#4caf50";

            return `
              <div class="todo-item ${
                todo.completed ? "completed" : ""
              }" style="border-left-color: ${priorityColor}">
                <div class="todo-content">
                  <input type="checkbox" class="todo-checkbox" ${
                    todo.completed ? "checked" : ""
                  } onchange="toggleTodo(${originalIndex})">
                  <div class="todo-text ${todo.completed ? "completed" : ""}">${
              todo.text
            }</div>
                </div>
                <div class="todo-meta">
                  <div class="todo-reminder">
                    <i class="bi bi-clock"></i>
                    <span>${
                      todo.reminder
                        ? formatReminderDate(todo.reminder)
                        : "No reminder"
                    }</span>
                  </div>
                  <div class="todo-actions">
                    <button class="todo-action-btn" onclick="editTodo(${originalIndex})" title="Edit task">
                      <i class="bi bi-pencil"></i>
                    </button>
                    <button class="todo-action-btn" onclick="deleteTodo(${originalIndex})" title="Delete task">
                      <i class="bi bi-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            `;
          })
          .join("");
      }

      function toggleTodo(index) {
        todos[index].completed = !todos[index].completed;
        localStorage.setItem("studyTasks", JSON.stringify(todos));
        renderTodos();

        const action = todos[index].completed ? "completed" : "reopened";
        showNotification(`Task ${action}!`, "success");
      }

      function editTodo(index) {
        editingTodoIndex = index;
        const todo = todos[index];
        document.getElementById("todoText").value = todo.text;
        document.getElementById("todoReminder").value = todo.reminder || "";
        document.querySelector(".modal-title").textContent = "Edit Study Task";
        document.getElementById("todoModal").style.display = "block";
        document.getElementById("todoText").focus();
      }

      function deleteTodo(index) {
        if (confirm("Are you sure you want to delete this task?")) {
          todos.splice(index, 1);
          localStorage.setItem("studyTasks", JSON.stringify(todos));
          renderTodos();
          showNotification("Task deleted!", "info");
        }
      }

      function formatReminderDate(dateString) {
        if (!dateString) return "No reminder";

        const date = new Date(dateString);
        const now = new Date();
        const diffMs = date.getTime() - now.getTime();
        const diffHours = diffMs / (1000 * 60 * 60);

        if (diffHours < 0) {
          return "Overdue";
        } else if (diffHours < 1) {
          const diffMins = Math.floor(diffMs / (1000 * 60));
          return `${diffMins} mins`;
        } else if (diffHours < 24) {
          return `${Math.floor(diffHours)}h`;
        } else {
          const diffDays = Math.floor(diffHours / 24);
          return `${diffDays}d`;
        }
      }

      function scheduleNotification(todo) {
        if (!todo.reminder) return;

        const reminderTime = new Date(todo.reminder);
        const now = new Date();
        const timeDiff = reminderTime.getTime() - now.getTime();

        if (timeDiff > 0) {
          if (Notification.permission === "granted") {
            setTimeout(() => {
              const notification = new Notification("ðŸ“š Study Reminder!", {
                body: todo.text,
                icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%234caf50"/><text x="50" y="60" text-anchor="middle" fill="white" font-size="30">ðŸ“š</text></svg>',
                tag: "study-reminder",
              });

              notification.onclick = function () {
                window.focus();
                notification.close();
                showNotification(`Reminder: ${todo.text}`, "info");
              };
            }, timeDiff);
          }
        }
      }

      // Todo Form Submit
      document
        .getElementById("todoForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          saveTodo();
        });

      // Close modal when clicking outside
      document
        .getElementById("todoModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeTodoModal();
          }
        });

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if ((e.ctrlKey || e.metaKey) && e.key === "n") {
          e.preventDefault();
          openTodoModal();
        }

        if (e.key === "Escape") {
          closeTodoModal();
        }

        if ((e.ctrlKey || e.metaKey) && e.key === "k") {
          e.preventDefault();
          searchInput.focus();
        }

        if ((e.ctrlKey || e.metaKey) && e.key === "t") {
          e.preventDefault();
          themeToggle.click();
        }
      });

      // Real-time participant count updates (simulated)
      function updateParticipantCounts() {
        const rooms = ["cs", "web-dev", "database"];
        rooms.forEach((room) => {
          const countElement = document.getElementById(`${room}-count`);
          if (countElement) {
            const currentCount = parseInt(countElement.textContent);
            const variation = Math.floor(Math.random() * 3) - 1;
            const newCount = Math.max(0, currentCount + variation);
            countElement.textContent = newCount;
          }
        });
      }

      setInterval(updateParticipantCounts, 30000);

      // User session validation
      function validateUserSession() {
        localStorage.setItem("currentUser", CURRENT_SESSION.user);
        localStorage.setItem("currentSession", JSON.stringify(CURRENT_SESSION));

        console.log(
          `âœ… Dashboard session validated for ${CURRENT_SESSION.user}`
        );
        console.log(`ðŸ“… Current session time: ${CURRENT_SESSION.datetime} UTC`);
      }

      // Initialize dashboard
      document.addEventListener("DOMContentLoaded", function () {
        // Validate user session
        validateUserSession();

        // Render todos
        renderTodos();

        // Check for pending notifications
        todos.forEach((todo) => {
          if (todo.reminder && !todo.completed) {
            scheduleNotification(todo);
          }
        });

        // Request notification permission
        if (Notification.permission === "default") {
          setTimeout(() => {
            if (
              confirm(
                "ðŸ“š StudyGroup would like to send you study reminders.\n\nAllow notifications to get reminded about your study tasks?"
              )
            ) {
              Notification.requestPermission().then((permission) => {
                if (permission === "granted") {
                  showNotification(
                    "Notifications enabled! You'll get reminders for your tasks.",
                    "success"
                  );
                }
              });
            }
          }, 3000);
        }

        // Show welcome message for DanePascual (without time display)
        setTimeout(() => {
          showNotification(
            `Welcome back to your dashboard, ${CURRENT_SESSION.user}! Ready to start studying?`,
            "info"
          );
        }, 2000);

        // Initialize keyboard shortcut hints
        if (!localStorage.getItem("hasSeenShortcuts")) {
          setTimeout(() => {
            if (
              confirm(
                "ðŸ’¡ Quick Tip: Learn keyboard shortcuts?\n\nâ€¢ Ctrl+N: Add new task\nâ€¢ Ctrl+K: Search\nâ€¢ Ctrl+T: Toggle theme\nâ€¢ Esc: Close modals\n\nWould you like to see more tips?"
              )
            ) {
              showNotification(
                "ðŸ’¡ Pro tip: Hover over buttons to see tooltips with more shortcuts!",
                "info"
              );
            }
            localStorage.setItem("hasSeenShortcuts", "true");
          }, 5000);
        }

        // Animate elements on load
        const animatedElements = document.querySelectorAll(
          ".action-card, .room-card, .stat-card"
        );
        animatedElements.forEach((element, index) => {
          element.style.opacity = "0";
          element.style.transform = "translateY(20px)";

          setTimeout(() => {
            element.style.transition = "all 0.6s ease-out";
            element.style.opacity = "1";
            element.style.transform = "translateY(0)";
          }, index * 100);
        });

        console.log(
          `ðŸŽ‰ Dashboard ready for ${CURRENT_SESSION.user} at ${CURRENT_SESSION.datetime} UTC`
        );
      });

      // Auto-save todos every 30 seconds
      setInterval(() => {
        if (todos.length > 0) {
          localStorage.setItem("studyTasks", JSON.stringify(todos));
        }
      }, 30000);

      // Performance monitoring
      window.addEventListener("load", () => {
        const loadTime = performance.now();
        console.log(
          `Dashboard loaded in ${loadTime.toFixed(2)}ms for ${
            CURRENT_SESSION.user
          }`
        );

        if (loadTime > 2000) {
          console.warn("Dashboard loading slowly. Consider optimization.");
        }
      });

      // Handle online/offline status
      window.addEventListener("online", () => {
        showNotification("ðŸ“¶ You're back online!", "success");
      });

      window.addEventListener("offline", () => {
        showNotification(
          "ðŸ“´ You're offline. Changes will sync when reconnected.",
          "info"
        );
      });

      // Session activity tracking
      let lastActivity = Date.now();

      function updateLastActivity() {
        lastActivity = Date.now();
      }

      // Track user activity
      ["mousedown", "mousemove", "keypress", "scroll", "touchstart"].forEach(
        (event) => {
          document.addEventListener(event, updateLastActivity, true);
        }
      );

      // Check for session timeout (30 minutes of inactivity)
      setInterval(() => {
        const timeSinceLastActivity = Date.now() - lastActivity;
        const thirtyMinutes = 30 * 60 * 1000;

        if (timeSinceLastActivity > thirtyMinutes) {
          showNotification(
            "âš ï¸ Session timeout warning. Click here to stay logged in.",
            "info"
          );
          lastActivity = Date.now(); // Reset after warning
        }
      }, 5 * 60 * 1000); // Check every 5 minutes

      // Real-time study progress tracking
      function updateStudyProgress() {
        const completedTasks = todos.filter((todo) => todo.completed).length;
        const totalTasks = todos.length;
        const progressPercent =
          totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

        // Store progress for analytics
        localStorage.setItem(
          "dailyProgress",
          JSON.stringify({
            date: "2025-07-05",
            completed: completedTasks,
            total: totalTasks,
            percent: progressPercent,
            user: CURRENT_SESSION.user,
          })
        );
      }

      // Update progress whenever todos change
      const originalRenderTodos = renderTodos;
      renderTodos = function () {
        originalRenderTodos();
        updateStudyProgress();
      };

      // Study streak tracking
      function updateStudyStreak() {
        const today = "2025-07-05";
        const streakData = JSON.parse(
          localStorage.getItem("studyStreak") ||
            '{"current": 0, "lastDate": null, "best": 0}'
        );

        const todayTasks = todos.filter((todo) => {
          const taskDate = new Date(todo.created).toISOString().split("T")[0];
          return taskDate === today && todo.completed;
        });

        if (todayTasks.length > 0 && streakData.lastDate !== today) {
          const yesterday = new Date("2025-07-04").toISOString().split("T")[0];

          if (streakData.lastDate === yesterday) {
            streakData.current += 1;
          } else {
            streakData.current = 1;
          }

          streakData.lastDate = today;
          streakData.best = Math.max(streakData.best, streakData.current);

          localStorage.setItem("studyStreak", JSON.stringify(streakData));

          if (streakData.current > 1) {
            showNotification(
              `ðŸ”¥ Study streak: ${streakData.current} days! Keep it up!`,
              "success"
            );
          }
        }
      }

      // Time-based productivity insights (updated for 2025-07-05 12:54:12 UTC)
      function getProductivityInsight() {
        const hour = 12; // Current UTC hour: 12:54:12
        let insight = "";

        if (hour >= 6 && hour < 9) {
          insight =
            "ðŸŒ… Morning productivity time! Your brain is fresh for complex tasks.";
        } else if (hour >= 9 && hour < 12) {
          insight =
            "âš¡ Peak focus hours! Great time for challenging study sessions.";
        } else if (hour >= 12 && hour < 14) {
          insight =
            "ðŸ½ï¸ Midday energy! Perfect time for active learning and collaboration.";
        } else if (hour >= 14 && hour < 17) {
          insight =
            "ðŸ“š Afternoon study time. Good for reviewing and practice problems.";
        } else if (hour >= 17 && hour < 20) {
          insight =
            "ðŸŒ† Evening hours. Perfect for reviewing today's learnings.";
        } else {
          insight =
            "ðŸŒ™ Late hours. Consider light reading or planning tomorrow.";
        }

        return insight;
      }

      // Show productivity insight for current time
      setTimeout(() => {
        const insight = getProductivityInsight();
        showNotification(insight, "info");
      }, 8000);

      // Export functions for potential use by other scripts
      window.StudyDashboard = {
        showNotification,
        openTodoModal,
        closeTodoModal,
        startFocusSession,
        joinRoom,
        validateUserSession,
        updateStudyProgress,
        updateStudyStreak,
        getProductivityInsight,
        currentUser: CURRENT_SESSION.user,
        currentSession: CURRENT_SESSION.datetime,
      };

      // Final initialization log with current timestamp
      console.log("âœ… Dashboard fully initialized for DanePascual");
      console.log("ðŸ“… Current UTC session: 2025-07-05 12:54:12 UTC");
      console.log("ðŸŽ¯ All features loaded successfully");
      console.log("â° Session start time logged for user activity tracking");

      // Log system info for debugging
      console.log("ðŸ’» Browser:", navigator.userAgent.split(" ").pop());
      console.log(
        "ðŸŒ Online status:",
        navigator.onLine ? "Connected" : "Offline"
      );
      console.log("ðŸ“± Screen resolution:", `${screen.width}x${screen.height}`);
      console.log("ðŸ”§ Dashboard version: v2.2.0 - Enhanced UX (No Clock)");

      // Update study streak on initialization
      updateStudyStreak();

      // Log successful dashboard load for DanePascual with current time
      console.log(
        `ðŸŽ‰ Dashboard ready for ${CURRENT_SESSION.user} at 2025-07-05 12:54:12 UTC`
      );
    </script>
  </body>
</html>
